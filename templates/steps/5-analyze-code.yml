parameters:
  - name: SONARCLOUD_NAME
    type: string
  - name: SONARCLOUD_ORGANISATION
    type: string
  - name: SONARCLOUD_PROJECTKEY
    type: string
  - name: SONARCLOUD_PROJECTNAME
    type: string

steps:
  - task: SonarCloudPrepare@1
    inputs:
      SonarCloud: ${{ parameters.SONARCLOUD_NAME }}
      organization: ${{ parameters.SONARCLOUD_ORGANISATION }}
      scannerMode: 'CLI'
      configMode: 'file'
      configFile: './sonarqube/sonar-project.properties'
      projectName: ${{ parameters.SONARCLOUD_PROJECTNAME }}
      cliProjectKey: ${{ parameters.SONARCLOUD_PROJECTKEY }}
  - task: SonarCloudAnalyze@1
  - task: SonarCloudPublish@1
    inputs:
      pollingTimeoutSec: '300'


